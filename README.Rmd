---
output: 
  html_document:
    keep_md: TRUE
    variant: markdown_github
---

```{r readme-setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/readrbio)](http://cran.r-project.org/package=readrbio)
[![Travis-CI Build Status](https://travis-ci.org/npjc/readrbio.svg?branch=master)](https://travis-ci.org/npjc/readrbio)
[![Coverage Status](http://codecov.io/github/npjc/readrbio/coverage.svg?branch=master)](http://codecov.io/github/npjc/readrbio?branch=master)

### readrbio

`readrbio` is an R pkg that provides some wrappers around [`readr`](https://github.com/hadley/readr) for common file formats, such as the common biological formats `.gff3`, `.wig`, and `.bed` using a consistent extension mechanism.

```{r get-pkg, eval = FALSE}
# install.packages("devtools")
devtools::install_github("npjc/readrbio")
```



### How it wraps
`read_*` functions take a file, generate a a list of named inputs that fed to [readr's](https://github.com/hadley/readr) `read_delimited()`.

```{r inside-read-gff3, eval = F}
read_gff3 <- function(file) {
  skel_gff3(file) %>% # first generate a skeleton input list 
    infer_skip() %>%  # modify input list by infering the correct skip argument.
    do_read()         # call read_delimited using input list as argument.
}
```

### What it wraps
Pkg currently exports `r length(grep("export", readLines("NAMESPACE"), value = T))` functions:
```{r, echo = FALSE}
exports <- grep("export", readLines("NAMESPACE"), value = T)
unlist(lapply(strsplit(exports, "[(//)]"), `[`, 2))
```

The `%>%` operator is from [magrittr](https://github.com/smbache/magrittr).

### Some example uses

```{r read-eg}
library(readrbio)
library(dplyr)
st <- "3R\treg\tbind_site\t46748\t48137\t0.499\t.\t.\tID=enr_reg_1\n"
read_gff(st)
read_gff("data-raw/file.gff3.gz")
st <- "chr3R 2 37 0.13859536\n"
read_wig(st)
read_wig("data-raw/wiggle_bedtype.wig.gz")
read_bed("data-raw/three_col.bed.gz", type = "bed3")
read_biogrid("data-raw/BIOGRID-ORGANISM-Cavia_porcellus-3.4.128.tab2.txt.gz", type= "tab2i")
```

### how to extend:

1. make a `skel_*()` that outputs named `list` that can be passed as the arguments to `do_read()`. Give it a class of `"input_list"`
2. write necessary `infer_*()` functions to modify and or validate any intricacies to the format.
3. test, examples, etc.